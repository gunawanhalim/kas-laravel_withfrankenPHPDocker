function option_cash_link(a){return window.location.href="?option=cashbook&book="+a,!1}function option_new_cash_link(){return window.location.href="?option=cashbook&newbook=true",!1}function goto_setup(a){a.preventDefault();var e=$("#ask_pepeku").val();return window.location.href="?pepeku="+e,!1}function create_book(a){a.preventDefault();var e=$("#zona_waktu").val(),t=$("#buku_kas").val(),n=$("#deskripsi_kas").val(),i=$("#matauang_kas").val(),l=$("#saldo_awal").val(),s=$("#pemasukan_1").val(),d=$("#pemasukan_2").val(),o=$("#pengeluaran_1").val(),r=$("#pengeluaran_2").val();e=$("#zona_waktu").val();if(""==t&&(t=lang.def_cash),""==s&&(s=lang.def_income1),""==d&&(d=lang.def_income2),""==o&&(o=lang.def_expense1),""==r&&(r=lang.def_expense2),""==i&&(i=lang.def_currency),0==/^[a-zA-Z0-9- ]*$/.test(s)||0==/^[a-zA-Z0-9- ]*$/.test(d)){var c='<div class="notifno">'+lang.use_number_first+"</div>";$("#create_book_notif").hide(),$("#create_book_notif").html(c).slideDown(500).delay(5e3).slideUp(500)}else if(0==/^[a-zA-Z0-9- ]*$/.test(o)||0==/^[a-zA-Z0-9- ]*$/.test(r)){c='<div class="notifno">'+lang.use_number_first+"</div>";$("#create_book_notif").hide(),$("#create_book_notif").html(c).slideDown(500).delay(5e3).slideUp(500)}else $("#create_book_loader").fadeIn(300),$.post("wizard/kirim.php",{zona_waktu:e,buku_kas:t,deskripsi_kas:n,matauang:i,saldo_awal:l,pemasukan_1:s,pemasukan_2:d,pengeluaran_1:o,pengeluaran_2:r,create_book:global_var},function(a,e){if($("#create_book_loader").fadeOut(300),"success"==e&&a.indexOf("berhasil")>=0){$("#kolomsetup").slideUp(1e3),$("#backbutton").fadeOut(500),$("#nextbutton").fadeOut(500);var n='<div class="cashbookoke"><div class="sukseskas"><strong>'+lang.congrats+"</strong> "+lang.first_cash+"</div>";n+="<br /><h2>"+t+"</h2><br />",n+=lang.has_created+"</div>",n+='<input id="backbutton" class="setupbutton" type="button" ',n+="onclick=\"window.location.href='"+global_url+'/?notice=first\'" value="'+lang.continu+' &raquo;">',$("#create_book_notif").hide(),$("#create_book_notif").html(n).slideDown(500)}else{n='<div class="notifno">'+lang.wrong+"</div>";$("#create_book_notif").hide(),$("#create_book_notif").html(n).slideDown(500).delay(5e3).slideUp(500)}});return!1}function import_book(a){a.preventDefault(),$("#loginpepeku_notif").hide();var e=$("#mailpepeku").val(),t=$("#passpepeku").val(),n=e.indexOf("@"),i=e.lastIndexOf(".");if(""==e||""==t){var l='<div class="notifno">Sorry, please fill all fields.</div>';$("#loginpepeku_notif").hide(),$("#loginpepeku_notif").html(l).slideDown(300).delay(5e3).slideUp(300)}else if(n<1||i<n+2||i+2>=e.length){l='<div class="notifno">Your email seems invalid.</div>';$("#loginpepeku_notif").hide(),$("#loginpepeku_notif").html(l).slideDown(300).delay(5e3).slideUp(300)}else $("#loginpepeku_loader").fadeIn(300),$.post("wizard/kirim.php",{mailpepeku:e,passpepeku:t,loginpepeku:global_var},function(a,e){if($("#loginpepeku_loader").fadeOut(300),"success"==e&&a.indexOf("berhasil")>=0){var t=a.split("|kas_nama|");$("#ppk_cb").html(t[1]);var n=a.split("|kas_desc|");$("#ppk_desc").html(n[1]);var i=a.split("|jml_kat_k|");$("#ppk_cat_k").html(i[1]);var l=a.split("|jml_kat_d|");$("#ppk_cat_d").html(l[1]);var s=a.split("|jml_trans|");$("#ppk_trans").html(s[1]);var d=a.split("|ppk_id|");$("#ppk_id").val(d[1]),$("#pepekuuser").slideUp(1e3),$("#pepekuimpor").delay(1e3).slideDown(500)}else if("success"==e&&a.indexOf("gagal")>=0){$("#loginpepeku_notif").hide(),$("#loginpepeku_notif").html('<div class="notifno">Sorry, your Pepeku email or password is wrong. Please try again.<br />| <a href="http://apps.pepeku.com/?user=forgotpassword" target="_blank">Forgot Password?</a> |</div>').slideDown(300)}});return!1}function imporpepeku(){$("#imporpepeku_notif").fadeIn(300);var a=$("#ppk_id").val();$.post("wizard/kirim.php",{ppk_id:a,imporpepeku:global_var},function(a,e){if("success"==e&&a.indexOf("berhasil")>=0&&($("#pepekuimpor").slideUp(1e3),$("#pepekusuccess").delay(800).slideDown(1e3)),"success"==e&&a.indexOf("gagal")>=0){$("#imporpepeku_notif").slideUp(300);$("#imporpepeku_notif2").hide(),$("#imporpepeku_notif2").html('<div class="notifno">Sorry, something wrong happen. Please refresh (F5) this page and try again.').slideDown(300).delay(5e3).slideUp(300)}})}function bukamenu(a){return $("#"+a).slideToggle(200),!1}function refreshpage(a){a.preventDefault(),location.reload()}function gotobook(){var a=$("#reportselectbook").val(),e=$("#monthlinkkas").val();window.location.href=gotobookvar+"&book="+a+e}function slideOpen(a){$("#trsub_"+a).fadeToggle(300),$("#divsub_"+a).slideToggle(300)}function slidedetail(a){if($.trim($("#divsub_"+a).html()).length)$("#trsub_"+a).fadeToggle(300);else{$("#loader_"+a).fadeIn(100);var e=$("#detail_report_book").val(),t=$("#detail_from").val(),n=$("#detail_to").val();$.post("laporan/laporan-kirim.php",{report_book:e,detail_from:t,detail_to:n,cat_id:a,report_detail:global_var},function(e,t){$("#loader_"+a).fadeOut(100);var n=e.split("|||");$("#divsub_"+a).html(n[1]),$("#trsub_"+a).fadeIn()})}}function netralize_catat(){return $("#trans_cat").val(""),$("#trans_id").val("0"),1==is_ID?($("#trans_jam").val(date_h),$("#trans_ampm").val("00")):($("#trans_jam").val(date_hk),$("#trans_ampm").val(date_a)),$("#trans_menit").val(date_i),$("#trans_nominal").val(""),$("#trans_desc").val(""),$("#trans_buku").val(active_book),$("#trans_tipe").prop("disabled",!1),$("#trans_hapus").hide(),$(".cat_in").removeAttr("disabled").removeAttr("style"),$(".cat_out").removeAttr("disabled").removeAttr("style"),!1}function catat_in(){return $("#trans_tipe").val("in"),$(".cat_in").show(),netralize_catat(),$(".cat_out").hide().prop("disabled","true"),$("#catat_trans").removeClass("catat_pengeluaran"),$("#catat_trans").addClass("catat_pemasukan"),$("#catat_trans_transfer").is(":visible")&&$("#catat_trans_transfer").fadeOut(300),$("#catat_trans").is(":hidden")&&$("#catat_trans").slideDown(300),!1}function catat_out(){return $("#trans_tipe").val("out"),$(".cat_out").show(),netralize_catat(),$(".cat_in").hide().prop("disabled","true"),$("#catat_trans").removeClass("catat_pemasukan"),$("#catat_trans").addClass("catat_pengeluaran"),$("#catat_trans_transfer").is(":visible")&&$("#catat_trans_transfer").fadeOut(300),$("#catat_trans").is(":hidden")&&$("#catat_trans").slideDown(300),!1}function rubah_tipe(){var a=$("#trans_tipe").val();"in"==a&&catat_in(),"out"==a&&catat_out()}function batal_trans(){return $("#catat_trans").fadeOut(300,function(){netralize_catat()}),!1}function form_catat_inout(a){a.preventDefault(),$(':input[type="submit"]').prop("disabled",!0);var e=$("#trans_tipe").val(),t=$("#trans_tgl").val(),n=$("#trans_jam").val(),i=$("#trans_menit").val(),l=$("#trans_ampm").val(),s=$("#trans_nominal").val(),d=$("#trans_cat").val(),o=$("#trans_desc").val(),r=$("#trans_buku").val(),c=$("#trans_id").val();if(""==t||""==s||"0"==s||"0.00"==s||"0,00"==s||""==d){var p='<div class="notifno">'+lang.fill_date_cash+"</div>";$("#catat_notif").hide(),$("#catat_notif").html(p).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else $("#catat_loader_"+e).fadeIn(200),$.post("buku/buku-kirim.php",{trans_tipe:e,trans_tgl:t,trans_jam:n,trans_menit:i,trans_ampm:l,trans_nominal:s,trans_cat:d,trans_desc:o,trans_buku:r,trans_id:c,trans_transaksi:global_var},function(a,t){if($("#catat_loader_"+e).fadeOut(200),"success"==t&&a.indexOf("berhasil")>=0){$("#catat_notif").hide();var n='<div class="notifyes">'+lang.sukses_submit+"</div>";$("#formcatat").slideUp(300),$("#catat_notif").html(n).slideDown(200),$("#catat_trans").delay(1e3).fadeOut(300,function(){location.reload(),$(':input[type="submit"]').prop("disabled",!1)})}else{n='<div class="notifno">'+lang.wrong+"</div>";$("#catat_notif").hide(),$("#catat_notif").html(n).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}});return!1}function edit_exin(a){var e=$("#trans_all_"+a).val().split("|");return $("#trans_tipe").val(e[1]),$("#trans_tgl").val(e[2]),$("#trans_jam").val(e[3]),$("#trans_menit").val(e[4]),$("#trans_ampm").val(e[5]),$("#trans_nominal").val(e[6]),$("#trans_cat").val(e[7]),$("#trans_desc").val(e[8]),$("#trans_id").val(e[0]),$("#trans_buku").val(e[9]),$("#trans_tipe").prop("disabled","disabled"),$("#trans_hapus").show(),1==is_ID?$("#trans_nominal").number(!0,2,",","."):$("#trans_nominal").number(!0,2),"out"==e[1]?($("#catat_trans").removeClass("catat_pemasukan"),$("#catat_trans").addClass("catat_pengeluaran"),$(".cat_out").removeAttr("disabled"),$(".cat_out").show(),$(".cat_in").hide().prop("disabled","true")):($("#catat_trans").removeClass("catat_pengeluaran"),$("#catat_trans").addClass("catat_pemasukan"),$(".cat_in").removeAttr("disabled"),$(".cat_in").show(),$(".cat_out").hide().prop("disabled","true")),$("html, body").delay(200).animate({scrollTop:150},300),$("#catat_trans").delay(500).slideDown(300),!1}function tanya_hapus(){var a='<div class="notifno">'+lang.del_therecord+'<br /><span class="tanya_hapus" id="ya_hapus" onclick="ya_hapus()">';return a+=lang.yes+'</span> &nbsp; <span class="tanya_hapus" id="tidak_hapus" onclick="tutup_hapus()">'+lang.no+"</span></div>",$("#catat_notif").hide(),$("#catat_notif").html(a).slideDown(200),!1}function tutup_hapus(){return $("#catat_notif").delay(100).slideUp(300),!1}function ya_hapus(){var a=$("#trans_tipe").val(),e=$("#trans_id").val();$("#catat_notif").delay(200).slideUp(300),$("#catat_loader_"+a).fadeIn(200),$.post("buku/buku-kirim.php",{trans_id:e,trans_hapus:global_var},function(e,t){if($("#catat_loader_"+a).fadeOut(200),"success"==t&&e.indexOf("berhasil")>=0){$("#catat_notif").hide();var n='<div class="notifyes">'+lang.sukses_delete+"</div>";$("#formcatat").slideUp(300),$("#catat_notif").html(n).slideDown(200),$("#catat_trans").delay(1e3).fadeOut(300,function(){location.reload()})}else{n='<div class="notifno">'+lang.wrong+"</div>";$("#catat_notif").hide(),$("#catat_notif").html(n).slideDown(200).delay(3e3).slideUp(200)}})}function catat_transfer(){return $("#catat_trans").is(":visible")&&$("#catat_trans").fadeOut(300),$("#trans_cat_from").val(""),$("#transferkasto").val(""),$("#trans_cat_to").val(""),$("#trans_trans_desc").val(""),$("#trans_trans_nominal").val(""),$(".cat_transfer").hide(),$("#catat_trans_transfer").slideDown(300),!1}function canceltransfer(){return $("#catat_trans_transfer").fadeOut(300),$("#transferkasto").val(""),$("#transferkasfrom").val(active_book),$("#trans_trans_nominal").val(""),$("#trans_trans_id").val("0"),$("#trans_trans_desc").val(""),!1}function edit_transfer(a){var e=$("#trans_all_"+a).val().split("|");return $("#trans_trans_tgl").val(e[2]),$("#trans_trans_jam").val(e[3]),$("#trans_trans_menit").val(e[4]),$("#trans_trans_ampm").val(e[5]),$("#trans_trans_nominal").val(e[6]),$("#trans_trans_desc").val(e[8]),$("#trans_trans_id").val(e[0]),$("#transferkasfrom").val(e[10]),$("#transferkasto").val(e[11]),$("#trans_trans_hapus").show(),$("html, body").delay(200).animate({scrollTop:150},300),$("#catat_trans_transfer").delay(500).slideDown(300),!1}function dotransfer(a){a.preventDefault(),$(':input[type="submit"]').prop("disabled",!0);var e=$("#trans_trans_id").val(),t=$("#trans_trans_tgl").val(),n=$("#trans_trans_jam").val(),i=$("#trans_trans_menit").val(),l=$("#trans_trans_ampm").val(),s=$("#trans_trans_nominal").val(),d=$("#transferkasfrom").val(),o=$("#transferkasto").val(),r=$("#trans_trans_desc").val();if(""==t||""==s||"0.00"==s||"0"==s||""==o){var c='<div class="notifno">'+lang.req_field+"</div>";$("#trans_catat_notif").hide(),$("#trans_catat_notif").html(c).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else if(d==o){c='<div class="notifno">'+lang.transfer_diff+"</div>";$("#trans_catat_notif").hide(),$("#trans_catat_notif").html(c).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else $("#trans_catat_loader").fadeIn(200),$.post("buku/buku-kirim.php",{trans_id:e,trans_tgl:t,trans_jam:n,trans_menit:i,trans_ampm:l,trans_nominal:s,transferkasfrom:d,transferkasto:o,trans_desc:r,transtransfer_transaksi:global_var},function(a,e){if($("#trans_catat_loader").fadeOut(200),"success"==e&&a.indexOf("berhasil")>=0){$("#trans_catat_notif").hide();var t='<div class="notifyes">'+lang.sukses_submit+"</div>";$("#trans_formcatat").slideUp(300),$("#trans_catat_notif").html(t).slideDown(200),$("#catat_trans_transfer").delay(1e3).fadeOut(300,function(){location.reload(),$(':input[type="submit"]').prop("disabled",!1)})}else{t='<div class="notifno">'+lang.wrong+"</div>";$("#trans_catat_notif").hide(),$("#trans_catat_notif").html(t).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}});return!0}function trans_tanya_hapus(){var a='<div class="notifno">'+lang.del_therecord+'<br /><span class="tanya_hapus" id="ya_hapus" onclick="ya_trans_hapus()">';return a+=lang.yes+"</span> &nbsp; ",a+='<span class="tanya_hapus" id="tidak_hapus" onclick="trans_tutup_hapus()">'+lang.no+"</span></div>",$("#trans_catat_notif").hide(),$("#trans_catat_notif").html(a).slideDown(200),!1}function trans_tutup_hapus(){return $("#trans_catat_notif").delay(100).slideUp(300),!1}function ya_trans_hapus(){var a=$("#trans_trans_id").val();$("#trans_catat_notif").delay(200).slideUp(300),$("#trans_catat_loader").fadeIn(200),$.post("buku/buku-kirim.php",{trans_id:a,trans_hapus:global_var},function(a,e){if($("#trans_catat_loader").fadeOut(200),"success"==e&&a.indexOf("berhasil")>=0){$("#trans_catat_notif").hide();var t='<div class="notifyes">'+lang.sukses_delete+"</div>";$("#trans_formcatat").slideUp(300),$("#trans_catat_notif").html(t).slideDown(200),$("#catat_trans_transfer").delay(1e3).fadeOut(300,function(){location.reload()})}else{t='<div class="notifno">'+lang.wrong+"</div>";$("#trans_catat_notif").hide(),$("#trans_catat_notif").html(t).slideDown(200).delay(3e3).slideUp(200)}})}function newkat_k(a){a.preventDefault(),$(':input[type="submit"]').prop("disabled",!0);var e=$("#kat_katnama_k").val();if(""==e){var t='<div class="notifno">'+lang.empty_cat+"</div>";$("#newkat_k_notif").hide(),$("#newkat_k_notif").html(t).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else if(0==/^[a-zA-Z0-9- ]*$/.test(e)){t='<div class="notifno">'+lang.use_number+"</div>";$("#newkat_k_notif").hide(),$("#newkat_k_notif").html(t).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else $("#loader_newkat_k").fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{name:e,dk:"K",new_kat:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#loader_newkat_k").fadeOut(200),""!=a)if("berhasil"==a.status)location.reload();else{var e='<div class="notifno">'+lang.wrong+"</div>";$("#newkat_k_notif").hide(),$("#newkat_k_notif").html(e).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}}})}function newkat_d(a){a.preventDefault(),$(':input[type="submit"]').prop("disabled",!0);var e=$("#kat_katnama_d").val();if(""==e){var t='<div class="notifno">'+lang.empty_cat+"</div>";$("#newkat_d_notif").hide(),$("#newkat_d_notif").html(t).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else if(0==/^[a-zA-Z0-9- ]*$/.test(e)){t='<div class="notifno">'+lang.use_number+"</div>";$("#newkat_d_notif").hide(),$("#newkat_d_notif").html(t).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else $("#loader_newkat_d").fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{name:e,dk:"D",new_kat:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#loader_newkat_d").fadeOut(200),""!=a)if("berhasil"==a.status)location.reload();else{var e='<div class="notifno">'+lang.wrong+"</div>";$("#newkat_d_notif").hide(),$("#newkat_d_notif").html(e).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}}})}function renamecat(a){var e=$("#katname_"+a).text();$(".katdel").hide(),$("#renamekat_"+a).val(e),$("#katedit_"+a).delay(200).slideUp(200),$("#katname_"+a).slideToggle(200,function(){$("#katrename_"+a).slideToggle(200)})}function renamecat_close(a){$("#katname_"+a).text();$("#katedit_"+a).delay(200).slideDown(200),$("#katrename_"+a).slideToggle(200,function(){$("#katname_"+a).slideToggle(200)})}function simpanrenamecat(a,e){a.preventDefault();var t=$("#renamekat_"+e).val(),n=$("#edit_book_d").val();if(""==t){var i='<div class="notifno">'+lang.empty_cat+"</div>";$("#renamekat_notif_"+e).hide(),$("#renamekat_notif_"+e).html(i).slideDown(200).delay(3e3).slideUp(200)}else if(0==/^[a-zA-Z0-9- ]*$/.test(t)){i='<div class="notifno">'+lang.use_number+"</div>";$("#renamekat_notif_"+e).hide(),$("#renamekat_notif_"+e).html(i).slideDown(200).delay(3e3).slideUp(200)}else $("#renamekat_loader_"+e).fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{name:t,catid:e,book:n,rename_kat:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#loader_newkat_d").fadeOut(200),""!=a)if("berhasil"==a.status)location.reload();else{var t='<div class="notifno">'+lang.wrong+"</div>";$("#renamekat_notif_"+e).hide(),$("#renamekat_notif_"+e).html(t).slideDown(200).delay(3e3).slideUp(200)}}})}function opendelcat(a,e){var t=$("#katname_"+e).text();return $(".katnamedit").hide(),$(".katname").show(),$(".katedit").show(),$("#katdelid_"+a).val(e),$("#katdelid_"+a).val(e),$("#catnamedel_"+a).text(t),$(".katmove_"+a).show(),$("#katmove_"+e).hide(),$("#katdel_"+a).slideDown(200),!1}function closedelcat(a){return $("#katdel_"+a).slideUp(200),$(".katmove_"+a).show(),!1}function delcat(a){var e=$("#katdelid_"+a).val(),t=$("#bookdel_id_"+a).val(),n=$("#katlist_"+a).val();$("#katdel_loader_"+a).fadeIn(200),$.post("pengaturan/pengaturan-kirim.php",{catid:e,book:t,moveto:n,del_kat:global_var},function(e,t){if($("#katdel_loader_"+a).fadeOut(200),"success"==t&&e.indexOf("berhasil")>=0)location.reload();else{var n='<div class="notifno">'+lang.wrong+"</div>";$("#delkat_notif_"+a).hide(),$("#delkat_notif_"+a).html(n).slideDown(200).delay(3e3).slideUp(200)}})}function save_kas_edit(a){a.preventDefault();var e=$("#nama_buku").val(),t=$("#desc_buku").val(),n=$("#saldo_buku").val(),i=$("#kasedit_id").val();if(""==e||""==t||""==n){var l='<div class="notifno">'+lang.fill_all+"</div>";$("#kas_notif").hide(),$("#kas_notif").html(l).slideDown(200).delay(3e3).slideUp(200)}else $("#kas_loader").fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{nama_buku:e,desc_buku:t,saldo_buku:n,kasedit_id:i,save_kas_edit:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#kas_loader").fadeOut(200),""!=a)if("berhasil"==a.status){var t='<div class="notifyes">'+lang.success_cash+"</div>";$("#kas_notif").hide(),$("#kas_notif").html(t).slideDown(200).delay(3e3).slideUp(200),$("#bookname").text(e)}else{t='<div class="notifno">'+lang.wrong+"</div>";$("#kas_notif").hide(),$("#kas_notif").html(t).slideDown(200).delay(3e3).slideUp(200)}}})}function option_kas_new(a){a.preventDefault(),$(':input[type="submit"]').prop("disabled",!0);var e=$("#newname").val(),t=$("#newdesc").val(),n=$("#newsaldo").val();if(""==e||""==n){var i='<div class="notifno">'+lang.req_field+"</div>";$("#kas_notif").hide(),$("#kas_notif").html(i).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else $("#kas_loader").fadeIn(200),$.post("pengaturan/pengaturan-kirim.php",{newname:e,newdesc:t,newsaldo:n,save_kas_new:global_var},function(a,e){if($("#kas_loader").fadeOut(200),"success"==e&&a.indexOf("berhasil")>=0){var t='<div class="notifyes">'+lang.success_cash_new+"</div>";$("#kas_notif_success").hide(),$("#kas_new").slideUp(800),$("#kas_notif_success").html(t).delay(1e3).slideDown(300).delay(2e3).slideUp(300,function(){window.location.href="?option=cashbook"})}else{t='<div class="notifno">'+lang.wrong+"</div>";$("#kas_notif").hide(),$("#kas_notif").html(t).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}});return!1}function setdefaultkas(a){$("#bukasloader_"+a).fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{kasid:a,setkasdefault:global_var},dataType:"json",timeout:3e4,success:function(e){if($("#bukasloader_"+a).fadeOut(200),""!=e)if("berhasil"==e.status)location.reload();else{var t='<div class="notifno">'+lang.wrong+"</div>";$("#notifkasoption_"+a).hide(),$("#notifkasoption_"+a).html(t).delay(500).fadeIn(300).delay(5e3).fadeOut(300)}}})}function deletetanya(a){var e='<div class="notifno">'+lang.sure_del_cash+"<br />"+lang.del_cash_cat+'<br /><span id="ya_hapus" class="tanya_hapus" onclick="deletekas(\''+a+"')\">"+lang.yes+'</span>&nbsp;&nbsp;<span id="tidak_hapus" class="tanya_hapus" onclick="dontdelcash(\''+a+"')\">"+lang.no+"</span></div>";$("#notifkasoption_"+a).hide(),$("#notifkasoption_"+a).html(e).delay(300).fadeIn(500)}function dontdelcash(a){$("#notifkasoption_"+a).delay(200).fadeOut(500)}function deletekas(a){$("#bukasloader_"+a).fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{kasid:a,deletebukukas:global_var},dataType:"json",timeout:300,success:function(e){if($("#bukasloader_"+a).fadeOut(200),""!=e)if("berhasil"==e.status)location.reload();else{var t='<div class="notifno">'+lang.wrong+"</div>";$("#notifkasoption_"+a).hide(),$("#notifkasoption_"+a).html(t).delay(500).fadeIn(300).delay(5e3).fadeOut(300)}}})}function editprofile(a){a.preventDefault();var e=$("#main_name").val(),t=$("#main_email").val(),n=$("#main_phone").val(),i=$("#main_company").val(),l=$("#main_compaddress1").val(),s=l+"||"+$("#main_compaddress2").val()+"||"+$("#main_compaddress3").val(),d=$("#main_province").val(),o=$("#main_city").val(),r=$("#main_position").val(),c=$("#main_use").val(),p=$("#main_pass1").val(),_=$("#main_pass2").val(),u=$("#main_language").val(),h=$("#main_timezone").val(),v=$("#main_matauang").val(),m=$("#main_sortcashbook").val(),f=$("#main_sortdebtcredit").val(),k=t.indexOf("@"),b=t.lastIndexOf(".");if(""==e||""==t||""==n||""==v||""==i||""==l||""==r||""==c){var g='<div class="notifno">'+lang.req_field+"</div>";$("#main_notif").hide(),$("#main_notif").html(g).slideDown(200).delay(4e3).slideUp(200)}else if("Asia/Jakarta"!=h&&"Asia/Jayapura"!=h&&"Asia/Makassar"!=h&&"Asia/Pontianak"!=h||""!=o&&""!=d)if(k<1||b<k+2||b+2>=t.length){g='<div class="notifno">'+lang.req_email+"</div>";$("#main_notif").hide(),$("#main_notif").html(g).slideDown(200).delay(4e3).slideUp(200)}else if(p.length>0&&p.length<"6"){g='<div class="notifno">'+lang.req_pass+"</div>";$("#main_notif").hide(),$("#main_notif").html(g).slideDown(200).delay(4e3).slideUp(200)}else if(""!=p&&p!=_){g='<div class="notifno">'+lang.req_samepass+"</div>";$("#main_notif").hide(),$("#main_notif").html(g).slideDown(200).delay(4e3).slideUp(200)}else $("#main_loader").fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{nama:e,email:t,phone:n,company:i,address:s,province:d,city:o,position:r,use:c,pass1:p,language:u,timezone:h,matauang:v,sortbukukas:m,sorthapiut:f,editprofile:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#main_loader").fadeOut(300),""!=a){var e=a.status;if("berhasil"==e){$("#main_pass1").val(""),$("#main_pass2").val("");var t='<div class="notifyes">'+lang.profile_success+"</div>"}else if("berhasilpremium"==e){$("#main_pass1").val(""),$("#main_pass2").val(""),$("#noticeprofile").hide();t='<div class="notifyes">'+lang.profilepremium_success+"</div>"}else if("emailwrong"==e)t='<div class="notifno">'+lang.email_used+"</div>";else if("phonewrong"==e)t='<div class="notifno">'+lang.phone_used+"</div>";else t='<div class="notifno">'+lang.wrong+"</div>";$("#main_notif").hide(),$("#main_notif").html(t).fadeIn(500).delay(4e3).fadeOut(500)}}});else{var g='<div class="notifno">'+lang.req_field+"</div>";$("#main_notif").hide(),$("#main_notif").html(g).slideDown(200).delay(4e3).slideUp(200)}}function editchildprofile(a){a.preventDefault();var e=$("#mainchild_pass1").val(),t=$("#mainchild_pass2").val();if(e.length>0&&e.length<"6"){var n='<div class="notifno">'+lang.req_pass+"</div>";$("#mainchild_notif").hide(),$("#mainchild_notif").html(n).slideDown(200).delay(4e3).slideUp(200)}else if(""!=e&&e!=t){n='<div class="notifno">'+lang.req_samepass+"</div>";$("#mainchild_notif").hide(),$("#mainchild_notif").html(n).slideDown(200).delay(4e3).slideUp(200)}else $("#mainchild_loader").fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{pass1:e,editchildprofile:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#mainchild_loader").fadeOut(300),""!=a){if("berhasil"==a.status){$("#mainchild_pass1").val(""),$("#mainchild_pass2").val("");var e='<div class="notifyes">'+lang.profile_success+"</div>"}else e='<div class="notifno">'+lang.wrong+"</div>";$("#mainchild_notif").hide(),$("#mainchild_notif").html(e).fadeIn(500).delay(4e3).fadeOut(500)}}})}function openaddchild(){return $("#child_id").val("0"),$("#trketedit").hide(),$("#child_name").val(""),$("#child_pass").val(""),$("#child_mail").val(""),$("#child_role").val(""),$("#childpassnote").hide(),$("#cashrole").val(""),$("#debtrole").val(""),$("#creditrole").val(""),$("#reportrole").val(""),$("#custombox :checkbox").removeAttr("disabled"),$("#custombox :checkbox").prop("checked",!1),$("#custombox").hide(),$("#newchild").slideToggle(300),!1}function intersect(a,e){var t;return e.length>a.length&&(t=e,e=a,a=t),a.filter(function(a){return e.indexOf(a)>-1})}function openchildedit(a){$("#trketedit").show(),$("#cashrole").val(""),$("#debtrole").val(""),$("#creditrole").val(""),$("#reportrole").val("");var e=$("#divchildname_"+a).text(),t=$("#divchildmail_"+a).text(),n=$("#divchildrole_"+a).text(),i=$("#childcap_"+a).val();if($("#child_role").val(n),"Custom"==n){$("#custombox :checkbox").prop("checked",!1),$("#custombox :checkbox").attr("disabled",!1),$("#custombox").show();var l=i.split(","),s=intersect(["debts","debts_balance","debts_record","debts_edit","debts_dwnexcel","debts_dwnpdf","debts_sendmailexcel","debts_sendmailpdf"],l);$("#debtrole").val(s),$.inArray("debts_balance",l)>=0||$.inArray("debts_record",l)>=0||$.inArray("debts_edit",l)>=0||$.inArray("debts_dwnexcel",l)>=0||$.inArray("debts_dwnpdf",l)>=0||$.inArray("debts_sendmailexcel",l)>=0||$.inArray("debts_sendmailpdf",l)>=0?($("#debts").prop("checked",!0),$("#debts_balance, #debts_record, #debts_edit, #debts_dwnexcel, #debts_dwnpdf, #debts_sendmailexcel, #debts_sendmailpdf").attr("disabled",!1),hilangkan(l,"debts"),$.inArray("debts_balance",l)>=0&&($("#debts_balance").prop("checked",!0),hilangkan(l,"debts_balance")),$.inArray("debts_record",l)>=0&&($("#debts_record").prop("checked",!0),hilangkan(l,"debts_record")),$.inArray("debts_edit",l)>=0&&($("#debts_edit").prop("checked",!0),hilangkan(l,"debts_edit")),$.inArray("debts_dwnexcel",l)>=0&&($("#debts_dwnexcel").prop("checked",!0),hilangkan(l,"debts_dwnexcel")),$.inArray("debts_dwnpdf",l)>=0&&($("#debts_dwnpdf").prop("checked",!0),hilangkan(l,"debts_dwnpdf")),$.inArray("debts_sendmailexcel",l)>=0&&($("#debts_sendmailexcel").prop("checked",!0),hilangkan(l,"debts_sendmailexcel")),$.inArray("debts_sendmailpdf",l)>=0&&($("#debts_sendmailpdf").prop("checked",!0),hilangkan(l,"debts_sendmailpdf"))):$.inArray("debts",l)>=0?$("#debts").prop("checked",!0):($("#debts").prop("checked",!1),$("#debts_balance, #debts_record, #debts_edit, #debts_dwnexcel, #debts_dwnpdf, #debts_sendmailexcel, #debts_sendmailpdf").attr("disabled",!0));var d=intersect(l,["credits","credits_balance","credits_record","credits_edit","credits_dwnexcel","dwnpdf_credits","credits_sendmailexcel","credits_sendmailpdf"]);$("#creditrole").val(d),$.inArray("credits_balance",l)>=0||$.inArray("credits_record",l)>=0||$.inArray("credits_edit",l)>=0||$.inArray("credits_dwnexcel",l)>=0||$.inArray("credits_dwnpdf",l)>=0||$.inArray("credits_sendmailexcel",l)>=0||$.inArray("credits_sendmailpdf",l)>=0?($("#credits").prop("checked",!0),$("#credits_balance, #credits_record, #credits_edit, #credits_dwnexcel, #credits_dwnpdf, #credits_mailxls, #credits_sendmailpdf").attr("disabled",!1),hilangkan(l,"credits"),$.inArray("credits_balance",l)>=0&&($("#credits_balance").prop("checked",!0),hilangkan(l,"credits_balance")),$.inArray("credits_record",l)>=0&&($("#credits_record").prop("checked",!0),hilangkan(l,"credits_record")),$.inArray("credits_edit",l)>=0&&($("#credits_edit").prop("checked",!0),hilangkan(l,"credits_edit")),$.inArray("credits_dwnexcel",l)>=0&&($("#credits_dwnexcel").prop("checked",!0),hilangkan(l,"credits_dwnexcel")),$.inArray("credits_dwnpdf",l)>=0&&($("#credits_dwnpdf").prop("checked",!0),hilangkan(l,"credits_dwnpdf")),$.inArray("credits_sendmailexcel",l)>=0&&($("#credits_sendmailexcel").prop("checked",!0),hilangkan(l,"credits_sendmailexcel")),$.inArray("credits_sendmailpdf",l)>=0&&($("#credits_sendmailpdf").prop("checked",!0),hilangkan(l,"credits_sendmailpdf"))):$.inArray("credits",l)>=0?$("#credits").prop("checked",!0):($("#credits").prop("checked",!1),$("#credits_balance, #credits_record, #credits_edit, #credits_dwnexcel, #credits_dwnpdf, #credits_sendmailexcel, #credits_sendmailpdf").attr("disabled",!0));var o=intersect(l,["report_daily","daily_dwnexcel","daily_dwnpdf","daily_sendmailexcel","daily_sendmailpdf","report_monthly","monthly_dwnexcel","monthly_dwnpdf","monthly_sendmailexcel","monthly_sendmailpdf","report_annually","annually_dwnexcel","annually_dwnpdf","annually_sendmailexcel","annually_sendmailpdf","report_custom","custom_dwnexcel","custom_dwnpdf","custom_sendmailexcel","custom_sendmailpdf"]);$("#reportrole").val(o),$.inArray("daily_dwnexcel",l)>=0||$.inArray("daily_dwnpdf",l)>=0||$.inArray("daily_sendmailexcel",l)>=0||$.inArray("daily_sendmailpdf",l)>=0?($("#rep_daily").prop("checked",!0),$("#daily_dwnexcel, #daily_dwnpdf, #daily_sendmailexcel, #daily_sendmailpdf").attr("disabled",!1),hilangkan(l,"report_daily"),$.inArray("daily_dwnexcel",l)>=0&&($("#daily_dwnexcel").prop("checked",!0),hilangkan(l,"daily_dwnexcel")),$.inArray("daily_dwnpdf",l)>=0&&($("#daily_dwnpdf").prop("checked",!0),hilangkan(l,"daily_dwnpdf")),$.inArray("daily_sendmailexcel",l)>=0&&($("#daily_sendmailexcel").prop("checked",!0),hilangkan(l,"daily_sendmailexcel")),$.inArray("daily_sendmailpdf",l)>=0&&($("#daily_sendmailpdf").prop("checked",!0),hilangkan(l,"daily_sendmailpdf"))):$.inArray("report_daily",l)>=0?$("#rep_daily").prop("checked",!0):($("#rep_daily").prop("checked",!1),$("#daily_dwnexcel, #daily_dwnpdf, #daily_sendmailexcel, #daily_sendmailpdf").attr("disabled",!0)),$.inArray("monthly_dwnexcel",l)>=0||$.inArray("monthly_dwnpdf",l)>=0||$.inArray("monthly_sendmailexcel",l)>=0||$.inArray("monthly_sendmailpdf",l)>=0?($("#rep_monthly").prop("checked",!0),$("#monthly_dwnexcel, #monthly_dwnpdf, #monthly_sendmailexcel, #monthly_sendmailpdf").attr("disabled",!1),hilangkan(l,"report_monthly"),$.inArray("monthly_dwnexcel",l)>=0&&($("#monthly_dwnexcel").prop("checked",!0),hilangkan(l,"monthly_dwnexcel")),$.inArray("monthly_dwnpdf",l)>=0&&($("#monthly_dwnpdf").prop("checked",!0),hilangkan(l,"monthly_dwnpdf")),$.inArray("monthly_sendmailexcel",l)>=0&&($("#monthly_sendmailexcel").prop("checked",!0),hilangkan(l,"monthly_sendmailexcel")),$.inArray("monthly_sendmailpdf",l)>=0&&($("#monthly_sendmailpdf").prop("checked",!0),hilangkan(l,"monthly_sendmailpdf"))):$.inArray("report_monthly",l)>=0?$("#rep_monthly").prop("checked",!0):($("#rep_monthly").prop("checked",!1),$("#monthly_dwnexcel, #monthly_dwnpdf, #monthly_sendmailexcel, #monthly_sendmailpdf").attr("disabled",!0)),$.inArray("annually_dwnexcel",l)>=0||$.inArray("annually_dwnpdf",l)>=0||$.inArray("annually_sendmailexcel",l)>=0||$.inArray("annually_sendmailpdf",l)>=0?($("#rep_annually").prop("checked",!0),$("#annually_dwnexcel, #annually_dwnpdf, #annually_sendmailexcel, #annually_sendmailpdf").attr("disabled",!1),hilangkan(l,"report_annually"),$.inArray("annually_dwnexcel",l)>=0&&($("#annually_dwnexcel").prop("checked",!0),hilangkan(l,"annually_dwnexcel")),$.inArray("annually_dwnpdf",l)>=0&&($("#annually_dwnpdf").prop("checked",!0),hilangkan(l,"annually_dwnpdf")),$.inArray("annually_sendmailexcel",l)>=0&&($("#annually_sendmailexcel").prop("checked",!0),hilangkan(l,"annually_sendmailexcel")),$.inArray("annually_sendmailpdf",l)>=0&&($("#annually_sendmailpdf").prop("checked",!0),hilangkan(l,"annually_sendmailpdf"))):$.inArray("report_annually",l)>=0?$("#rep_annually").prop("checked",!0):($("#rep_annually").prop("checked",!1),$("#annually_dwnexcel, #annually_dwnpdf, #annually_sendmailexcel, #annually_sendmailpdf").attr("disabled",!0)),$.inArray("custom_dwnexcel",l)>=0||$.inArray("custom_dwnpdf",l)>=0||$.inArray("custom_sendmailexcel",l)>=0||$.inArray("custom_sendmailpdf",l)>=0?($("#rep_custom").prop("checked",!0),$("#custom_dwnexcel, #custom_dwnpdf, #custom_sendmailexcel, #custom_sendmailpdf").attr("disabled",!1),hilangkan(l,"report_custom"),$.inArray("custom_dwnexcel",l)>=0&&($("#custom_dwnexcel").prop("checked",!0),hilangkan(l,"custom_dwnexcel")),$.inArray("custom_dwnpdf",l)>=0&&($("#custom_dwnpdf").prop("checked",!0),hilangkan(l,"custom_dwnpdf")),$.inArray("custom_sendmailexcel",l)>=0&&($("#custom_sendmailexcel").prop("checked",!0),hilangkan(l,"custom_sendmailexcel")),$.inArray("custom_sendmailpdf",l)>=0&&($("#custom_sendmailpdf").prop("checked",!0),hilangkan(l,"custom_sendmailpdf"))):$.inArray("report_custom",l)>=0?$("#rep_custom").prop("checked",!0):($("#rep_custom").prop("checked",!1),$("#custom_dwnexcel, #custom_dwnpdf, #custom_sendmailexcel, #custom_sendmailpdf").attr("disabled",!0)),$.inArray("tool_invoice",l)>=0||$.inArray("tool_note",l)>=0?($("#tools").prop("checked",!0),$.inArray("tool_invoice",l)>=0&&($("#tool_einvoice").prop("checked",!0),hilangkan(l,"tool_invoice")),$.inArray("tool_note",l)>=0&&($("#tool_notes").prop("checked",!0),hilangkan(l,"tool_note"))):($("#tools").prop("checked",!1),$("#tool_einvoice, #tool_notes").attr("disabled",!0)),hilangkan(l,"debts"),hilangkan(l,"credits"),hilangkan(l,"report_daily"),hilangkan(l,"report_monthly"),hilangkan(l,"report_annually"),hilangkan(l,"report_custom");var r=cleanArray(l),c=r.join(",");$("#cashrole").val(c);for(var p=0;r[p];){var _=r[p].split("_");"all"==_[2]&&$("#kas_"+_[1]).prop("checked",!0),"balance"==_[2]&&$("#balance_"+_[1]).prop("checked",!0),"record"==_[2]&&$("#record_"+_[1]).prop("checked",!0),"edit"==_[2]&&$("#edit_"+_[1]).prop("checked",!0),"dwnexcel"==_[2]&&$("#dwnexcel_"+_[1]).prop("checked",!0),"dwnpdf"==_[2]&&$("#dwnpdf_"+_[1]).prop("checked",!0),"sendmailexcel"==_[2]&&$("#sendmailexcel_"+_[1]).prop("checked",!0),"sendmailpdf"==_[2]&&$("#sendmailpdf_"+_[1]).prop("checked",!0),p++}for(var u=$("#cashidchild").val().split(","),h=0;u[h];)$.inArray("kas_"+u[h]+"_all",r)<0&&$("#balance_"+u[h]+", #record_"+u[h]+", #edit_"+u[h]+", #dwnexcel_"+u[h]+", #dwnpdf_"+u[h]+", #sendmailexcel_"+u[h]+", #sendmailpdf_"+u[h]).attr("disabled",!0),h++}else $("#custombox").hide();return $("#child_id").val(a),$("#child_name").val(e),$("#child_mail").val(t),$("#childpassnote").show(),$("#newchild").slideDown(300),!1}function childsubmitform(a){a.preventDefault();var e=$("#child_name").val(),t=$("#child_mail").val(),n=$("#child_pass").val(),i=$("#child_role").val(),l=$("#child_id").val(),s=t.indexOf("@"),d=t.lastIndexOf("."),o=$("#cashrole").val().split(","),r=$("#debtrole").val().split(","),c=$("#creditrole").val().split(","),p=$("#reportrole").val().split(","),_=o.concat(r,c,p);$("#tool_einvoice").is(":checked")&&_.push("tool_invoice"),$("#tool_notes").is(":checked")&&_.push("tool_note");var u=_.join(",");if(""==e||""==t||""==i){var h='<div class="notifno">'+lang.fill_all+"</div>";$("#childnotif").hide(),$("#childnotif").html(h).slideDown(200).delay(4e3).slideUp(200)}else if(""==n&&"0"==l){h='<div class="notifno">'+lang.fill_all+"</div>";$("#childnotif").hide(),$("#childnotif").html(h).slideDown(200).delay(4e3).slideUp(200)}else if(s<1||d<s+2||d+2>=t.length){h='<div class="notifno">'+lang.req_email+"</div>";$("#childnotif").hide(),$("#childnotif").html(h).slideDown(200).delay(4e3).slideUp(200)}else if(n.length>0&&n.length<"6"){h='<div class="notifno">'+lang.req_pass+"</div>";$("#childnotif").hide(),$("#childnotif").html(h).slideDown(200).delay(4e3).slideUp(200)}else if("Custom"==i&&$("#custombox :checkbox:checked").length<=0){h='<div class="notifno">'+lang.nocheckchild+"</div>";$("#childnotif").hide(),$("#childnotif").html(h).slideDown(200).delay(4e3).slideUp(200)}else $("#childloader").fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{nama:e,email:t,pass:n,role:i,capabilities:u,child_id:l,childform:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#childloader").fadeOut(300),""!=a){var e=a.status;if("emailwrong"==e)var t='<div class="notifno">'+lang.email_used+"</div>";else if("berhasil"==e)location.reload();else t='<div class="notifno">'+lang.wrong+"</div>";$("#childnotif").hide(),$("#childnotif").html(t).fadeIn(500).delay(4e3).fadeOut(500)}}})}function openchilddel(a){var e='<div class="notifno">'+lang.you_sure+" &nbsp;<span onclick=\"no_delchild('"+a+'\')" class="tanya_hapus" id="tidak_hapus">';return e+=lang.no+"</span>&nbsp;&nbsp;<span onclick=\"yes_delchild('"+a+'\')" class="tanya_hapus" id="ya_hapus">'+lang.yes+"</span></div>",$("#notifchilddel_"+a).html(e),$("#notifchilddel_"+a).slideDown(400),!1}function no_delchild(a){return $("#notifchilddel_"+a).fadeOut(300),$("#notifchilddel_"+a).delay(300).html(""),!1}function yes_delchild(a){$("#notifchilddel_"+a).fadeOut(300),$("#childlistloader_"+a).fadeIn(100),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{child_id:a,childdel:global_var},dataType:"json",timeout:3e4,success:function(e){if($("#childlistloader_"+a).fadeOut(300),""!=e)if("berhasil"==e.status)$("#childuser_"+a).fadeOut(500);else{var t='<div class="notifno">'+lang.wrong+"</div>";$("#notifchilddel_"+a).hide(),$("#notifchilddel_"+a).html(t).fadeIn(500).delay(4e3).fadeOut(500)}}})}function customuser(){"Custom"==$("#child_role").val()?($("#custombox").slideDown(),$("#custombox :checkbox").removeAttr("disabled"),$("#custombox :checkbox").prop("checked",!1)):($("#custombox").hide(),$("#cashrole").val(""),$("#debtrole").val(""),$("#creditrole").val(""),$("#reportrole").val(""))}function child_chek(a,e){if("cash"==a)var t="#kas_"+e,n="#balance_"+e+", #record_"+e+", #edit_"+e+", #dwnexcel_"+e+", #dwnpdf_"+e+", #sendmailexcel_"+e+", #sendmailpdf_"+e;else if("debts"==a)t="#debts",n="#debts_balance, #debts_record, #debts_edit, #debts_dwnexcel, #debts_dwnpdf, #debts_sendmailexcel, #debts_sendmailpdf";else if("credits"==a)t="#credits",n="#credits_balance, #credits_record, #credits_edit, #credits_dwnexcel, #credits_dwnpdf, #credits_sendmailexcel, #credits_sendmailpdf";else if("daily"==a)t="#rep_daily",n="#daily_dwnexcel, #daily_dwnpdf, #daily_sendmailexcel, #daily_sendmailpdf";else if("monthly"==a)t="#rep_monthly",n="#monthly_dwnexcel, #monthly_dwnpdf, #monthly_sendmailexcel, #monthly_sendmailpdf";else if("annually"==a)t="#rep_annually",n="#annually_dwnexcel, #annually_dwnpdf, #annually_sendmailexcel, #annually_sendmailpdf";else if("custom"==a)t="#rep_custom",n="#custom_dwnexcel, #custom_dwnpdf, #custom_sendmailexcel, #custom_sendmailpdf";else t="#tools",n="#tool_einvoice, #tool_notes";$(t).is(":checked")?($(n).removeAttr("disabled"),$(n).prop("checked",!0),"cash"==a&&pushcheck("kas_"+e+"_ada","main"),"debts"==a&&pushcheck("debts_ada","main"),"credits"==a&&pushcheck("credits_ada","main"),"daily"==a&&pushcheck("daily_ada","main"),"monthly"==a&&pushcheck("monthly_ada","main"),"annually"==a&&pushcheck("annually_ada","main"),"custom"==a&&pushcheck("custom_ada","main")):($(n).prop("checked",!1),$(n).attr("disabled",!0),"cash"==a&&pushcheck("kas_"+e+"_hilang","main"),"debts"==a&&pushcheck("debts_hilang","main"),"credits"==a&&pushcheck("credits_hilang","main"),"daily"==a&&pushcheck("daily_hilang","main"),"monthly"==a&&pushcheck("monthly_hilang","main"),"annually"==a&&pushcheck("annually_hilang","main"),"custom"==a&&pushcheck("custom_hilang","main"))}function pushcheck(a,e){var t=a.split("_"),n=t[0],i=$("#cashrole").val().split(","),l=t[1];if("kas"==n){if("main"==e)hilangkan(i,"kas_"+l+"_all"),hilangkan(i,"kas_"+l+"_balance"),hilangkan(i,"kas_"+l+"_record"),hilangkan(i,"kas_"+l+"_edit"),hilangkan(i,"kas_"+l+"_dwnexcel"),hilangkan(i,"kas_"+l+"_dwnpdf"),hilangkan(i,"kas_"+l+"_sendmailexcel"),hilangkan(i,"kas_"+l+"_sendmailpdf"),"ada"==t[2]&&(i.push("kas_"+l+"_all"),i.push("kas_"+l+"_balance"),i.push("kas_"+l+"_record"),i.push("kas_"+l+"_edit"),i.push("kas_"+l+"_dwnexcel"),i.push("kas_"+l+"_dwnpdf"),i.push("kas_"+l+"_sendmailexcel"),i.push("kas_"+l+"_sendmailpdf"));else{hilangkan(i,a);var s=t[2];$("#"+s+"_"+l).is(":checked")&&i.push(a)}var d=cleanArray(i).join(",");$("#cashrole").val(d)}else if("debts"==n){var o=$("#debtrole").val().split(",");if("main"==e)hilangkan(o,"debts"),hilangkan(o,"debts_balance"),hilangkan(o,"debts_record"),hilangkan(o,"debts_edit"),hilangkan(o,"debts_dwnexcel"),hilangkan(o,"debts_dwnpdf"),hilangkan(o,"debts_sendmailexcel"),hilangkan(o,"debts_sendmailpdf"),"ada"==t[1]&&(o.push("debts"),o.push("debts_balance"),o.push("debts_record"),o.push("debts_edit"),o.push("debts_dwnexcel"),o.push("debts_dwnpdf"),o.push("debts_sendmailexcel"),o.push("debts_sendmailpdf"));else{hilangkan(o,a);s=t[1];$("#debts_"+s).is(":checked")&&o.push(a)}d=cleanArray(o).join(",");$("#debtrole").val(d)}else if("credits"==n){var r=$("#creditrole").val().split(",");if("main"==e)hilangkan(r,"credits"),hilangkan(r,"credits_balance"),hilangkan(r,"credits_record"),hilangkan(r,"credits_edit"),hilangkan(r,"credits_dwnexcel"),hilangkan(r,"credits_dwnpdf"),hilangkan(r,"credits_sendmailexcel"),hilangkan(r,"credits_sendmailpdf"),"ada"==t[1]&&(r.push("credits"),r.push("credits_balance"),r.push("credits_record"),r.push("credits_edit"),r.push("credits_dwnexcel"),r.push("credits_dwnpdf"),r.push("credits_sendmailexcel"),r.push("credits_sendmailpdf"));else{hilangkan(r,a);s=t[1];$("#credits_"+s).is(":checked")&&r.push(a)}d=cleanArray(r).join(",");$("#creditrole").val(d)}else if("daily"==n){var c=$("#reportrole").val().split(",");if("main"==e)hilangkan(c,"report_daily"),hilangkan(c,"daily_dwnexcel"),hilangkan(c,"daily_dwnpdf"),hilangkan(c,"daily_sendmailexcel"),hilangkan(c,"daily_sendmailpdf"),"ada"==t[1]&&(c.push("report_daily"),c.push("daily_dwnexcel"),c.push("daily_dwnpdf"),c.push("daily_sendmailexcel"),c.push("daily_sendmailpdf"));else{hilangkan(c,a);s=t[1];$("#daily_"+s).is(":checked")&&c.push(a)}d=cleanArray(c).join(",");$("#reportrole").val(d)}else if("monthly"==n){c=$("#reportrole").val().split(",");if("main"==e)hilangkan(c,"report_monthly"),hilangkan(c,"monthly_dwnexcel"),hilangkan(c,"monthly_dwnpdf"),hilangkan(c,"monthly_sendmailexcel"),hilangkan(c,"monthly_sendmailpdf"),"ada"==t[1]&&(c.push("report_monthly"),c.push("monthly_dwnexcel"),c.push("monthly_dwnpdf"),c.push("monthly_sendmailexcel"),c.push("monthly_sendmailpdf"));else{hilangkan(c,a);s=t[1];$("#monthly_"+s).is(":checked")&&c.push(a)}d=cleanArray(c).join(",");$("#reportrole").val(d)}else if("annually"==n){c=$("#reportrole").val().split(",");if("main"==e)hilangkan(c,"report_annually"),hilangkan(c,"annually_dwnexcel"),hilangkan(c,"annually_dwnpdf"),hilangkan(c,"annually_sendmailexcel"),hilangkan(c,"annually_sendmailpdf"),"ada"==t[1]&&(c.push("report_annually"),c.push("annually_dwnexcel"),c.push("annually_dwnpdf"),c.push("annually_sendmailexcel"),c.push("annually_sendmailpdf"));else{hilangkan(c,a);s=t[1];$("#annually_"+s).is(":checked")&&c.push(a)}d=cleanArray(c).join(",");$("#reportrole").val(d)}else if("custom"==n){c=$("#reportrole").val().split(",");if("main"==e)hilangkan(c,"report_custom"),hilangkan(c,"custom_dwnexcel"),hilangkan(c,"custom_dwnpdf"),hilangkan(c,"custom_sendmailexcel"),hilangkan(c,"custom_sendmailpdf"),"ada"==t[1]&&(c.push("report_custom"),c.push("custom_dwnexcel"),c.push("custom_dwnpdf"),c.push("custom_sendmailexcel"),c.push("custom_sendmailpdf"));else{hilangkan(c,a);s=t[1];$("#custom_"+s).is(":checked")&&c.push(a)}d=cleanArray(c).join(",");$("#reportrole").val(d)}}function hilangkan(a){for(var e,t,n=arguments,i=n.length;i>1&&a.length;)for(e=n[--i];-1!==(t=a.indexOf(e));)a.splice(t,1);return a}function cleanArray(a){for(var e=new Array,t=0;t<a.length;t++)a[t]&&e.push(a[t]);return e}function opennote(a){if("new"==a)$("#downnote").hide(),$("#notearea").val(""),$("#colorselect").val("noteyellow"),$("#noteid").val("new"),$("#thenote").removeClass().addClass("noteyellow");else{var e=$("#isi_"+a).val(),t=$("#color_"+a).val();$("#downnote").show(),$("#downnote").prop("href","ekspor_txt/catatan.php/?id="+a),$("#notearea").val(e),$("#colorselect").val(t),$("#noteid").val(a),$("#thenote").addClass(t)}return $("#popnotebg").delay(100).fadeIn(300),!1}function closepop(){return $("#popnotebg").fadeOut(300),$("#notearea").val(""),$("#colorselect").val("noteyellow"),$("#noteid").val(""),$("#thenote").removeClass(),!1}function changecolor(){var a=$("#colorselect").val();return $("#thenote").removeClass().addClass(a),!1}function savenoted(){$("#savenote").prop("disabled",!0);var a=$("#noteid").val(),e=$("#colorselect").val(),t=$("#notearea").val(),n=$("#isi_0").val();if("0"==a&&t==n)closepop();else{if($("#noteloader").fadeIn(200),"0"==a)a="new";$.ajax({type:"POST",url:"peralatan/peralatan-kirim.php",data:{id:a,color:e,notes:t,editnote:global_var},dataType:"json",timeout:3e4,success:function(a){($("#noteloader").fadeOut(200),""!=a)&&("berhasil"==a.status&&($("#savenote").prop("disabled",!1),location.reload()))}})}return!1}function nonote(){var a='<div class="premtransfer">'+lang.please+" ";a+='<strong><a href="'+premium_url+'" title="'+lang.click_upgrade+'">'+lang.upgrade+"</a></strong> "+lang.more_notes,a+='<br /><br /><input type="button" value="'+lang.cancel+'" name="note_close"  onclick="cancelnoteupgrade()" /> ',a+='&nbsp; &nbsp; <input type="button" value="'+lang.upgrade_now+' &raquo;" name="note_upgrade" onclick="location.href=\''+premium_url+"'\" /></div>",$("#notifcatatan").html(a).slideDown(600)}function cancelnoteupgrade(){$("#notifcatatan").delay(100).fadeOut(300,function(){$("#notifcatatan").html("")})}function slidedelnote(){var a='<div class="notifno">'+lang.sure+' &nbsp;<span id="ya_hapus" class="tanya_hapus" onclick="ya_hapusnote()">';a+=lang.yes+'</span>&nbsp;&nbsp;<span id="tidak_hapus" class="tanya_hapus" onclick="no_hapusnote()">'+lang.no+"</span></div>",$("#notifnotedel").html(a).slideDown(300)}function no_hapusnote(){$("#notifnotedel").fadeOut(300)}function ya_hapusnote(){$("#noteloader").fadeIn(200);var a=$("#noteid").val();$.ajax({type:"POST",url:"peralatan/peralatan-kirim.php",data:{delid:a,delnote:global_var},dataType:"json",timeout:3e4,success:function(a){($("#noteloader").fadeOut(200),""!=a)&&("berhasil"==a.status&&location.reload())}})}function detect_nan_angka(a){if(""==a)var e=0;else e=a;return e}function checkship(a){return a||(a=!1),$("#shiptocover").toggle(),0==a?$("#invcoverarea input").val(""):$("#useshipto").prop("checked",!0),!1}function addinvrow(a){var e=format_nominal,t='<tr class="rowinvitem" id="rowinvitem_'+a+'">';t+='<td><input type="text" class="center invid" style="width: 48px;" name="invid[]" id="invid_'+a+'" value="'+a+'"/></td>',t+='<td><textarea name="invdesc[]" class="invdesc" id="invdesc_'+a+'"></textarea></td>',t+='<td><input type="text" class="center invqty" name="invqty[]" id="qty_'+a+'" style="width: 42px;" value="1" onchange="linetotal('+a+')"/></td>',t+='<td><input type="text" class="unitprice right jnumber" value="'+e+'" onchange="linetotal('+a+')" ',t+='name="unitprice[]" style="width:124px;" id="unitprice_'+a+'"',t+="onFocus=\"javascript:this.value==this.defaultValue ? this.value = '' : ''\" ",t+="onBlur=\"javascript:this.value == '' ? this.value = this.defaultValue : ''\"/></td>",t+='<td><input type="text" class="linetotal right jnumber" value="'+e+'" ',t+='readonly="readonly" name="linetotal[]" id="linetotal_'+a+'" ',t+="onFocus=\"javascript:this.value==this.defaultValue ? this.value = '' : ''\" ",t+="onBlur=\"javascript:this.value == '' ? this.value = this.defaultValue : ''\" /></td>",t+='<td class="center tdinvdel"><img src="/assets/akun_bizz/images/delete.png" width="20" height="20" ',t+='alt="delete" title="'+lang.delete_this+'" onclick="delrow('+a+')" class="pointer" id="invdel_'+a+'"/></td></tr>';var n=1*a+1;return $("#invtab").append(t),$("#invaddbutton").attr("onClick","addinvrow("+n+")"),1==is_ID?$("#unitprice_"+a+", #linetotal_"+a).number(!0,2,",","."):$("#unitprice_"+a+", #linetotal_"+a).number(!0,2),!1}function delrow(a){$("#rowinvitem_"+a).remove(),subtotal(),alltotal()}function linetotal(a){var e=1*$("#qty_"+a).val()*(1*$("#unitprice_"+a).val());return $("#linetotal_"+a).val(e),subtotal(),alltotal(),!1}function subtotal(){var a=0;return $(".linetotal").each(function(){a+=parseFloat(remove_format(this.value))}),$("#invsubtotal").val(a),!1}function lowcover(a,e){return e||(e=!1),$("."+a).toggle(),0==e?$("#td_"+a+" input:text").val(format_nominal):$(".check_"+a).prop("checked",!0),alltotal(),!1}function alltotal(){$("#invsubtotal").val();var a=1*$("#invsubtotal").val()-1*detect_nan_angka($("#invcredit").val())-1*detect_nan_angka($("#invdiscount").val())+1*detect_nan_angka($("#invtax").val())+1*detect_nan_angka($("#invship").val());return $("#invtotal").val(a),!1}function remove_format(a){if(1==is_ID)var e=(e=a.split(".").join("")).replace(",",".");else e=a.split(",").join("");return e}function stamp(a){if(1==is_ID)var e="_id";else e="_en";var t="#invstampimg_"+a+e;return $("#inv_"+a+"_stamp").prop("checked")?$(t).show():$(t).hide(),!1}function check_userlogo(){return""==$("#new_user_logo").val()?$("#invremoveicon").hide():$("#invremoveicon").show(),!1}function uploadphoto(){var a=global_url+"/peralatan/unggah.php";$("#fileupload").fileupload({url:a,dataType:"json",acceptFileTypes:/(\.|\/)(jpg|png)$/i,maxFileSize:1e6,done:function(a,e){$.each(e.result.files,function(a,e){if(e.error)$("#progress").fadeOut(300),$("#uploaderror").html('<div class="notifno">'+e.error+"</div>").slideDown(500).delay(3e3).slideUp(500);else{$.post("peralatan/peralatan-kirim.php",{file:e.name,userlogo:global_var},function(a,e){}),$("#progress").fadeOut(200);var t="peralatan/files/thumbnail/"+e.name;$("#new_user_logo").val(t),$("#userlogo").slideUp(500,function(){$("#userlogo").html('<img class="userlogo" src="'+t+'" alt="user" title="">').delay(300).slideDown(500),check_userlogo()})}})},progressall:function(a,e){var t=parseInt(e.loaded/e.total*100,10);$("#progress .progress-bar").css("width",t+"%")}}).on("fileuploadadd",function(a,e){$("#progress").fadeIn(100)}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")}function remove_logo(){$.post("peralatan/peralatan-kirim.php",{del_userlogo:global_var},function(a,e){if("success"==e&&a.indexOf("berhasil")>=0){var t='<img src="/assets/akun_bizz/images/invoice-default-logo.jpg" width="240" height="180" alt="upload logo" title="'+lang.company_logo+'">';$("#userlogo").slideUp(500,function(){$("#userlogo").html(t).slideDown(500),check_userlogo()}),$("#new_user_logo").val("")}else $("#uploaderror").html('<div class="notifno">'+lang.not_delete+"</div>").slideDown(500).delay(3e3).slideUp(500)})}function save_invoice(){$("#invsave").prop("disabled",!0);var a=$("#new_user_logo").val(),e=$("#invnumber").val(),t=$("#invdate").val(),n=$("#invduedate").val(),i=$("#compname").val(),l=$("#compaddress1").val(),s=i+"||"+l+"||"+$("#compaddress2").val()+"||"+$("#compaddress3").val(),d=$("#shipname").val(),o=$("#shipaddress1").val(),r=d+"||"+o+"||"+$("#shipaddress2").val()+"||"+$("#shipaddress3").val(),c=$("#costname").val(),p=$("#costaddress1").val(),_=$("#costaddress2").val(),u=$("#costid").val(),h=c+"||"+p+"||"+_+"||"+$("#costaddress3").val()+"||"+u,v=$("#invnote").val(),m=$("#invtotal").val(),f=invoiceidvar,k=$(".invid").map(function(){return $(this).val()}).get().join("||"),b=$(".invdesc").map(function(){return $(this).val()}).get(),g=b.join("||"),y=$(".invqty").map(function(){return $(this).val()}).get().join("||"),w=$(".unitprice").map(function(){return $(this).val()}).get().join("||"),x=checkboxval("#inv_paid_stamp")+"||"+checkboxval("#inv_urgent_stamp")+"||"+checkboxval("#inv_past_stamp")+"||"+checkboxval("#inv_final_stamp")+"||"+checkboxval("#inv_received_stamp")+"||"+checkboxval("#inv_approved_stamp"),D=$("#invcredit").val()+"||"+$("#invdiscount").val()+"||"+$("#invtax").val()+"||"+$("#invship").val(),O=checkboxval("#useshipto")+"||"+checkboxval("#invcreditcheck")+"||"+checkboxval("#invdiscountcheck")+"||"+checkboxval("#invtaxcheck")+"||"+checkboxval("#invshipcheck");if(""==i||""==l||""==e||""==t||""==n||""==c||""==p){var U='<div class="notifno">'+lang.req_field+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(U).slideDown(300).delay(5e3).slideUp(200,function(){$("#invsave").prop("disabled",!1)})}else if(1!=checkboxval("#useshipto")||""!=d&&""!=o)if($.inArray("",b)>=0){U='<div class="notifno">'+lang.fill_invoice+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(U).slideDown(300).delay(5e3).slideUp(200,function(){$("#invsave").prop("disabled",!1)})}else $("#invloader").fadeIn(300),$.post("peralatan/peralatan-kirim.php",{logo:a,invnumber:e,invdate:t,invduedate:n,company:s,shipping:r,costumer:h,item_id:k,item_desc:g,item_qty:y,item_price:w,aftersubtotal:D,invtotal:m,invnote:v,stamp:x,usecheck:O,invdbid:f,save_invoice:global_var},function(a,e){if($("#invloader").fadeOut(300),"success"==e&&a.indexOf("berhasil")>=0)if($("#notifbutton").hide(),1==sgetinvoice){var t='<div class="notifyes">'+lang.invoice_sukses+"</div>";$("#notifbutton").html(t).slideDown(300).delay(5e3).slideUp(200,function(){$("#invsave").prop("disabled",!1)})}else{var n=a.split("||");t='<div class="notifyes">'+lang.invoice_sukses_edit+"</div>";$("#notifbutton").html(t).slideDown(200).delay(2e3).slideUp(200,function(){window.location.replace("?tool=invoice&invoice=edit&id="+n[1])})}else{t='<div class="notifno">'+lang.wrong+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(t).slideDown(300).delay(5e3).slideUp(200,function(){$("#invsave").prop("disabled",!1)})}});else{var U='<div class="notifno">'+lang.fill_ship+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(U).slideDown(300).delay(5e3).slideUp(200,function(){$("#invsave").prop("disabled",!1)})}}function pure_save_invoice(){var a=$("#new_user_logo").val(),e=$("#invnumber").val(),t=$("#invdate").val(),n=$("#invduedate").val(),i=$("#compname").val()+"||"+$("#compaddress1").val()+"||"+$("#compaddress2").val()+"||"+$("#compaddress3").val(),l=$("#shipname").val()+"||"+$("#shipaddress1").val()+"||"+$("#shipaddress2").val()+"||"+$("#shipaddress3").val(),s=$("#costname").val()+"||"+$("#costaddress1").val()+"||"+$("#costaddress2").val()+"||"+$("#costaddress3").val()+"||"+$("#costid").val(),d=$("#invnote").val(),o=$("#invtotal").val(),r=invoiceidvar,c=$(".invid").map(function(){return $(this).val()}).get().join("||"),p=$(".invdesc").map(function(){return $(this).val()}).get().join("||"),_=$(".invqty").map(function(){return $(this).val()}).get().join("||"),u=$(".unitprice").map(function(){return $(this).val()}).get().join("||"),h=checkboxval("#inv_paid_stamp")+"||"+checkboxval("#inv_urgent_stamp")+"||"+checkboxval("#inv_past_stamp")+"||"+checkboxval("#inv_final_stamp")+"||"+checkboxval("#inv_received_stamp")+"||"+checkboxval("#inv_approved_stamp"),v=$("#invcredit").val()+"||"+$("#invdiscount").val()+"||"+$("#invtax").val()+"||"+$("#invship").val(),m=checkboxval("#useshipto")+"||"+checkboxval("#invcreditcheck")+"||"+checkboxval("#invdiscountcheck")+"||"+checkboxval("#invtaxcheck")+"||"+checkboxval("#invshipcheck");$.post("peralatan/peralatan-kirim.php",{logo:a,invnumber:e,invdate:t,invduedate:n,company:i,shipping:l,costumer:s,item_id:c,item_desc:p,item_qty:_,item_price:u,aftersubtotal:v,invtotal:o,invnote:d,stamp:h,usecheck:m,invdbid:r,save_invoice:global_var},function(a,e){if(0==sgetinvoicethok&&"success"==e&&a.indexOf("berhasil")>=0){var t=a.split("||");window.location.replace("?tool=invoice&invoice=edit&id="+t[1])}})}function download_invoice(){var a=$("#compname").val(),e=$("#compaddress1").val(),t=$("#invnumber").val(),n=$("#invdate").val(),i=$("#invduedate").val(),l=$("#costname").val(),s=$("#costaddress1").val(),d=$("#shipname").val(),o=$("#shipaddress1").val(),r=checkboxval("#useshipto"),c=$(".invdesc").map(function(){return $(this).val()}).get();if(""==a||""==e||""==t||""==n||""==i||""==l||""==s){var p='<div class="notifno">'+lang.req_field+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(p).slideDown(300).delay(5e3).slideUp(300)}else if(1!=r||""!=d&&""!=o)if($.inArray("",c)>=0){p='<div class="notifno">'+lang.fill_invoice+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(p).slideDown(300).delay(5e3).slideUp(300)}else $("#invoiceform").submit(),"1"==current_user_role&&pure_save_invoice();else{var p='<div class="notifno">'+lang.fill_ship+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(p).slideDown(300).delay(5e3).slideUp(300)}}function checkboxval(a){return $(a).is(":checked")?$(a).val():0}function notifopendel_invoice(a){if($("#invdelask").is(":hidden")){var e=$("#tdinvnumb_"+a).text();$("#inv_ya_hapus").click(function(){del_invoice(a)}),$("#invnumbask").text(e),$("#invdelask").fadeIn(300)}}function notifclosedel_invoice(a){$("#invdelask").is(":visible")&&$("#invdelask").fadeOut(300,function(){$("#inv_ya_hapus").unbind(),$("#invnumbask").text("")})}function del_invoice(a){$("#invdelaskloader").fadeIn(200),$.post("peralatan/peralatan-kirim.php",{invdelid:a,delinvoice:global_var},function(e,t){$("#invdelaskloader").fadeOut(200),"success"==t&&e.indexOf("berhasil")>=0&&(notifclosedel_invoice(a),$("#trinvid_"+a).fadeOut(200))})}function slidemail(){$("#invmail").slideToggle(300)}function send_invoice(){var a=$("#new_user_logo").val(),e=$("#invnumber").val(),t=$("#invdate").val(),n=$("#invduedate").val(),i=$("#compname").val(),l=$("#compaddress1").val(),s=$("#compaddress2").val(),d=$("#compaddress3").val(),o=checkboxval("#useshipto"),r=$("#shipname").val(),c=$("#shipaddress1").val(),p=$("#shipaddress2").val(),_=$("#shipaddress3").val(),u=$("#costname").val(),h=$("#costaddress1").val(),v=$("#costaddress2").val(),m=$("#costaddress3").val(),f=new Array;$(".invid").each(function(){f.push($(this).val())});var k=new Array;$(".invdesc").each(function(){k.push($(this).val())});var b=new Array;$(".invqty").each(function(){b.push($(this).val())});var g=new Array;$(".unitprice").each(function(){g.push($(this).val())});var y=new Array;$(".linetotal").each(function(){y.push($(this).val())});var w=$("#invsubtotal").val(),x=checkboxval("#invcreditcheck"),D=$("#invcredit").val(),O=checkboxval("#invdiscountcheck"),U=$("#invdiscount").val(),A=checkboxval("#invtaxcheck"),j=$("#invtax").val(),I=checkboxval("#invshipcheck"),T=$("#invship").val(),C=$("#invtotal").val(),q=$("#invnote").val(),P=checkboxval("#inv_past_stamp"),S=checkboxval("#inv_final_stamp"),z=checkboxval("#inv_urgent_stamp"),F=checkboxval("#inv_received_stamp"),Z=checkboxval("#inv_paid_stamp"),J=checkboxval("#inv_approved_stamp"),V=$("#mailfromname").val(),B=$("#mailfrom").val(),K=$("#mailtoname").val(),M=$("#mailto").val(),R=$("#mailsubject").val(),Y=$("#mailmessage").val(),E=B.indexOf("@"),G=B.lastIndexOf("."),H=M.indexOf("@"),L=M.lastIndexOf(".");if(""==i||""==l||""==e||""==t||""==n||""==u||""==h){var N='<div class="notifno">'+lang.fill_all+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(N).slideDown(300).delay(5e3).slideUp(300)}else if(1!=checkboxval("#useshipto")||""!=r&&""!=c)if($.inArray("",k)>=0){N='<div class="notifno">'+lang.fill_invoice+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(N).slideDown(300).delay(5e3).slideUp(300)}else if(""==V||""==B||""==K||""==M||""==R||""==Y){N='<div class="notifno">'+lang.fill_mail+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(N).slideDown(300).delay(5e3).slideUp(300)}else if(E<1||G<E+2||G+2>=B.length){N='<div class="notifno">'+lang.req_email+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(N).slideDown(300).delay(5e3).slideUp(300)}else if(H<1||L<H+2||L+2>=M.length){N='<div class="notifno">'+lang.recipient_email+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(N).slideDown(300).delay(5e3).slideUp(300)}else $("#invloader").fadeIn(300),$.post("ekspor_pdf/invoice.php?language=id",{new_user_logo:a,invnumb:e,invdate:t,invduedate:n,compname:i,compaddress1:l,compaddress2:s,compaddress3:d,useshipto:o,shipname:r,shipaddress1:c,shipaddress2:p,shipaddress3:_,costname:u,costaddress1:h,costaddress2:v,costaddress3:m,"invid[]":f,"invdesc[]":k,"invqty[]":b,"unitprice[]":g,"linetotal[]":y,invsubtotal:w,invcreditcheck:x,invcredit:D,invdiscountcheck:O,invdiscount:U,invtaxcheck:A,invtax:j,invshipcheck:I,invship:T,invtotal:C,invnote:q,invpastduestamp:P,invfinalstamp:S,invurgentstamp:z,invreceivedstamp:F,invpaidstamp:Z,invapprovedstamp:J,invoicesend:global_var,invoiceaction:"mail",mailfromname:V,mailfrom:B,mailtoname:K,mailto:M,mailsubject:R,mailmessage:Y},function(a,e){if($("#invloader").fadeOut(300),"success"==e&&a.indexOf("terkirim")>=0){if($("#notifbutton").hide(),1==sgetinvoice){var t='<div class="notifyes">'+lang.invoice_attach+" "+M+"</div>";$("#notifbutton").html(t).slideDown(300).delay(5e3).slideUp(300),pure_save_invoice()}else{t='<div class="notifyes">';t+=lang.invoice_attach+" "+M+".<br />",t+=lang.saving_invoice+"</div>",$("#notifbutton").html(t).slideDown(300).delay(2e3).show(1e3,function(){pure_save_invoice()})}$("#invmail").delay(500).slideUp(500,function(){$("#mailtoname, #mailto, #mailsubject, #mailmessage").val(""),$("#mailfromname").val(current_user_nama),$("#mailfrom").val(current_user_mail)})}else{var n=a.split("||");t='<div class="notifno">'+lang.wrong+"<br />"+n[1]+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(t).slideDown(300).delay(5e3).slideUp(300)}});else{var N='<div class="notifno">'+lang.fill_ship+"</div>";$("#notifbutton").hide(),$("#notifbutton").html(N).slideDown(300).delay(5e3).slideUp(300)}}function new_hapiut(a){$("#hp_tipe").val(a),$("#hp_nominal, #hp_client, #hp_desc").val(""),"utang"==a?$("#catat_hp").removeClass("catat_pemasukan").addClass("catat_pengeluaran"):$("#catat_hp").removeClass("catat_pengeluaran").addClass("catat_pemasukan"),$("#catat_hp").slideDown()}function batal_catathp(a){$("#catat_hp").slideUp(300,function(){$("#hp_alsocash").val("0"),$("#hp_nominal").val(""),$("#alsoitem").hide()})}function submit_newhp(a){a.preventDefault(),$(':input[type="submit"]').prop("disabled",!0);var e=$("#hp_tipe").val(),t=$("#hp_tgl").val(),n=$("#hp_jam").val(),i=$("#hp_menit").val(),l=$("#hp_ampm").val();if($("#duedatecheck").is(":checked"))var s=$("#hp_tgl_due").val(),d=$("#hp_jam_due").val(),o=$("#hp_menit_due").val(),r=$("#hp_ampm_due").val();else s="0",d="0",o="0",r="0";var c=$("#hp_nominal").val(),p=$("#hp_client").val(),_=$("#hp_desc").val(),u=$("#hp_alsocash").val(),h=$("#hp_cash").val(),v=$("#hp_cat").val(),m=$("#hp_id").val();if(""==t||""==c||"0"==c||"0.00"==c||"0,00"==c||""==p){var f='<div class="notifno">'+lang.req_field+"</div>";$("#catat_notif").hide(),$("#catat_notif").html(f).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else $("#catat_loader_"+e).fadeIn(200),$.ajax({type:"POST",url:"harta/harta-kirim.php",data:{hp_tipe:e,hp_tgl:t,hp_jam:n,hp_menit:i,hp_ampm:l,hp_tgl_due:s,hp_jam_due:d,hp_menit_due:o,hp_ampm_due:r,hp_nominal:c,hp_client:p,hp_desc:_,hp_id:m,hp_alsocash:u,hp_cash:h,hp_cat:v,hp_new:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#catat_loader_"+e).fadeOut(200),""!=a)if("berhasil"==a.status){$("#catat_notif").hide();var t='<div class="notifyes">'+lang.sukses_submit+"</div>";$("#formcatat").slideUp(300),$("#catat_notif").html(t).slideDown(200),$("#catat_hp, #edit_hp").delay(1e3).fadeOut(300,function(){$(':input[type="submit"]').prop("disabled",!1),location.reload()})}else{t='<div class="notifno">'+lang.wrong+"</div>";$("#catat_notif").hide(),$("#catat_notif").html(t).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}}})}function openalso(){"1"==$("#hp_alsocash").val()?$("#alsoitem").slideDown():$("#alsoitem").hide()}function edit_hapiut(a){$("#hp_tipe").val(a),"utang"==a?$("#edit_hp").removeClass("catat_pemasukan").addClass("catat_pengeluaran"):$("#edit_hp").removeClass("catat_pengeluaran").addClass("catat_pemasukan"),1==is_ID?$("#hp_nominal").number(!0,2,",","."):$("#hp_nominal").number(!0,2),$("#edit_hp").slideDown()}function batal_edithp(){$("#edit_hp").slideUp(300,function(){$("#catat_notif").hide()})}function tanya_hapus_hapiut(){if("utang"==$("#hp_tipe").val())var a=lang.tanya_hapus_utang;else a=lang.tanya_hapus_piutang;var e='<div class="notifno">'+a+'<br /><span class="tanya_hapus" id="ya_hapus" onclick="ya_hapus_hapiut()">';return e+=lang.yes+'</span> &nbsp; <span class="tanya_hapus" id="tidak_hapus" onclick="tutup_hapus()">'+lang.no+"</span></div>",$("#catat_notif").hide(),$("#catat_notif").html(e).slideDown(200),!1}function ya_hapus_hapiut(){var a=$("#hp_tipe").val(),e=$("#hp_id").val();if($("#catat_notif").delay(200).slideUp(300),$("#catat_loader_"+a).fadeIn(200),"piutang"==a)var t="credit";else t="debt";$.ajax({type:"POST",url:"harta/harta-kirim.php",data:{hp_id:e,hp_hapus:global_var},dataType:"json",timeout:3e4,success:function(e){if($("#catat_loader_"+a).fadeOut(200),$("html, body").animate({scrollTop:0}),""!=e)if("berhasil"==e.status){$("#catat_notif").hide();var n='<div class="notifyes">'+lang.sukses_delete+"</div>";$("#formcatat").slideUp(300),$("#catat_notif").html(n).slideDown(300,function(){location.replace("?asset="+t)})}else{n='<div class="notifno">'+lang.wrong+"</div>";$("#catat_notif").hide(),$("#catat_notif").html(n).slideDown(200).delay(3e3).slideUp(200)}}})}function new_hapiut_item(a){netralize_hp_item(),$(".titlehapiutform, .alsodesc, .cat_in, .cat_out").hide(),$("#hpitem_tipe").val(a),"credit"==$("#hp_tipe_item").val()?"min"==a?($("#titleplus, #alsoincome, .cat_in").show(),$("#catat_hpitem").removeClass("catat_pemasukan").addClass("catat_pengeluaran")):($("#titlemin, #alsoexpense, .cat_out").show(),$("#catat_hpitem").removeClass("catat_pengeluaran").addClass("catat_pemasukan")):"min"==a?($("#titlemin, #alsoexpense, .cat_out").show(),$("#catat_hpitem").removeClass("catat_pengeluaran").addClass("catat_pemasukan")):($("#titleplus, #alsoincome, .cat_in").show(),$("#catat_hpitem").removeClass("catat_pemasukan").addClass("catat_pengeluaran")),$("#catat_hpitem").slideDown()}function openalsoitem(){"1"==$("#hpitem_alsocash").val()?$("#alsoitemplusmin").slideDown():$("#alsoitemplusmin").hide()}function batal_catathpitem(){$("#catat_hpitem").slideUp(300,function(){netralize_hp_item()})}function netralize_hp_item(){$("#hpitem_id, #hpitem_alsocash").val("0"),$(".edititem_title, #alsoitemplusmin").hide(),$("#hpitem_nominal, #hpitem_desc, #hpitem_nominal,#hpitem_cat").val(""),1==is_ID?($("#hpitem_jam").val(date_h),$("#hpitem_ampm").val("00")):($("#hpitem_jam").val(date_hk),$("#hpitem_ampm").val(date_a)),$("#trans_menit").val(date_i),$("#hpitem_tgl").val(date_full)}function submit_newhpitem(a){a.preventDefault(),$(':input[type="submit"]').prop("disabled",!0);var e=$("#hp_tipe_item").val(),t=$("#hpitem_tipe").val(),n=$("#hpitem_tgl").val(),i=$("#hpitem_jam").val(),l=$("#hpitem_menit").val(),s=$("#hpitem_ampm").val(),d=$("#hpitem_nominal").val(),o=$("#hpitem_desc").val(),r=$("#hpitem_alsocash").val(),c=$("#hpitem_cash").val(),p=$("#hpitem_cat").val(),_=$("#hp_id").val(),u=$("#hpitem_id").val();if("plus"==t&&"debt"==e||"min"==t&&"credit"==e)var h="min";else h="plus";if(""==n||""==d||"0"==d||"0.00"==d||"0,00"==d){var v='<div class="notifno">'+lang.req_field+"</div>";$("#hpitem_notif").hide(),$("#hpitem_notif").html(v).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else if(1==r&&""==p){v='<div class="notifno">'+lang.req_field+"</div>";$("#hpitem_notif").hide(),$("#hpitem_notif").html(v).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}else $("#catat_loader_"+h).fadeIn(200),$.ajax({type:"POST",url:"harta/harta-kirim.php",data:{hp_tipe:e,hpitem_tipe:t,hpitem_tgl:n,hpitem_jam:i,hpitem_menit:l,hpitem_ampm:s,hpitem_nominal:d,hpitem_desc:o,hpitem_alsocash:r,hpitem_cash:c,hpitem_cat:p,hpitem_hapiutid:_,hpitem_id:u,hpitem_new:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#catat_loader_"+h).fadeOut(200),""!=a)if("berhasil"==a.status){$("#hpitem_notif").hide();var e='<div class="notifyes">'+lang.sukses_submit+"</div>";$("#formcatat").slideUp(300),$("#hpitem_notif").html(e).slideDown(200),$("#catat_hpitem").delay(1e3).fadeOut(300,function(){$(':input[type="submit"]').prop("disabled",!1),location.reload()})}else{e='<div class="notifno">'+a+"</div>";$("#hpitem_notif").hide(),$("#hpitem_notif").html(e).slideDown(200).delay(3e3).slideUp(200,function(){$(':input[type="submit"]').prop("disabled",!1)})}}})}function askdel_hpitem(a){var e=$("#ask_"+a).val();$("#askitem").html(e),$("#hpdelitem").val(a),$("#notifdelitem").fadeIn()}function tutup_hapus_hapiutitem(){$("#notifdelitem").fadeOut(300,function(){$("#askitem").html(""),$("#hpdelitem").val("")})}function ya_hapus_hapiutitem(){var a=$("#hpdelitem").val();$("#delhpitemloader").fadeIn(),$.ajax({type:"POST",url:"harta/harta-kirim.php",data:{hpdelitem:a,hpitem_del:global_var},dataType:"json",timeout:3e4,success:function(a){$("#delhpitemloader").fadeOut(300,function(){location.reload()})}})}function edit_hpitem(a){$(".titlehapiutform, .alsodesc, .cat_in, .cat_out").hide();var e=$("#itemtipe_"+a).val(),t=$("#itemtgl_"+a).val();if(1==is_ID)var n=$("#itemjamid_"+a).val();else n=$("#itemjamen_"+a).val();var i=$("#itemmenit_"+a).val(),l=$("#itemampm_"+a).val(),s=$("#itemjml_"+a).val(),d=$("#itemket_"+a).val(),o=$("#itemalsocash_"+a).val(),r=$("#itemcash_"+a).val(),c=$("#itemcat_"+a).val();$("#hpitem_id").val(a),$("#hpitem_tgl").val(t),$("#hpitem_jam").val(n),$("#hpitem_menit").val(i),$("#hpitem_ampm").val(l),$("#hpitem_nominal").val(format_angka(s)),$("#hpitem_desc").val(d),$("#hpitem_desc").val(d),$("#hpitem_alsocash").val(o),"1"==o?($("#hpitem_cash").val(r),$("#hpitem_cat").val(c),$("#alsoitemplusmin").show()):$("#alsoitemplusmin").hide(),$("#edititem_title_"+e).show(),1==is_ID?$("#hpitem_nominal").number(!0,2,",","."):$("#hpitem_nominal").number(!0,2);var p=$("#hp_tipe_item").val();$("#hpitem_tipe").val(e),"credit"==p?"min"==e?($("#titleplus, #alsoincome, .cat_in").show(),$("#catat_hpitem").removeClass("catat_pemasukan").addClass("catat_pengeluaran")):($("#titlemin, #alsoexpense, .cat_out").show(),$("#catat_hpitem").removeClass("catat_pengeluaran").addClass("catat_pemasukan")):"min"==e?($("#titlemin, #alsoexpense, .cat_out").show(),$("#catat_hpitem").removeClass("catat_pengeluaran").addClass("catat_pemasukan")):($("#titleplus, #alsoincome, .cat_in").show(),$("#catat_hpitem").removeClass("catat_pemasukan").addClass("catat_pengeluaran")),$("#catat_hpitem").slideDown()}function askhidehapiut(a,e){$("#askitemhide").text(e),$("#hphideid").val(a),$("#notifhide").fadeIn()}function tutup_hide_hapiut(){$("#notifhide").fadeOut(400,function(){$("#askitemhide").text(""),$("#hphideid").val("")})}function ya_hide_hapiut(a){var e=$("#hphideid").val();$("#hidehploader").fadeIn(),$.post("harta/harta-kirim.php",{hphideid:e,hp_hide:global_var},function(e,t){$("#hidehploader").fadeOut(300,function(){window.location.replace("?asset="+a)})})}function askshowhapiut(a,e){$("#askitemshow").text(e),$("#hpshowid").val(a),$("#notifshow").fadeIn()}function tutup_show_hapiut(){$("#notifshow").fadeOut(400,function(){$("#askitemshow").text(""),$("#hpshowid").val("")})}function ya_show_hapiut(a){var e=$("#hpshowid").val();$("#showhploader").fadeIn(),$.post("harta/harta-kirim.php",{hpshowid:e,hp_show:global_var},function(a,e){$("#showhploader").fadeOut(300,function(){location.reload()})})}function changedate(){var a=$("#lap_tgl").val(),e=$("#monthlinkkas").val(),t=a.replace(/ /g,"+");window.location.href="?report=daily&date="+t+e}function open_resetapp(){$("#popdeltrans").fadeIn()}function batal_resetapp(){$("#popdeltrans").fadeOut(400,function(){$("#butlanjut").show(),$("#butpass").hide(),$("#passadmin").val(""),$("#notifreset").html("")})}function lanjut_resetapp(){$("#butlanjut").slideUp(400,function(){$("#butpass").slideDown()})}function ok_resetapp(){var a=$("#passadmin").val();""==a?$("#notifreset").html('<div class="notifno">'+lang.sorrypass+"</div>").slideDown().delay(2e3).slideUp():($("#appresetloader").fadeIn(),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{pass:a,reset_app:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#appresetloader").hide(),""!=a){var e=a.status;if("berhasil"==e){$("#butpass").slideUp();var t=lang.okreset+'<br /><br /><input type="button" id="delcancel" name="delcancel" value="'+lang.okpunct+'" onclick="location.reload()"/>';$("#notifreset").html('<div class="notifyes">'+t+"</div>").slideDown()}else if("passerror"==e){var n='<div class="notifno">'+lang.resetwp+"</div>";$("#notifreset").html(n).slideDown().delay(2e3).slideUp()}else{n='<div class="notifno">'+lang.wrong+"</div>";$("#notifreset").html(n).slideDown().delay(3e3).slideUp()}}}}))}function logout(){window.localStorage.removeItem("noticeprofilekas")}function disc_voucher(){var a=$("#blnhid").val(),e=$("#kode_voucher").val(),t=$("#uang").val();if(""==e){var n='<div class="notifno">'+lang.empty_vocer+"</div>";$("#newkat_k_notif").hide(),$("#newkat_k_notif").html(n).slideDown(200).delay(3e3).slideUp(200)}else $("#loader_discode").fadeIn(200),$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{name:e,boelan:a,kodevoucher:global_var},dataType:"json",timeout:3e4,success:function(a){if($("#loader_discode").fadeOut(200),""!=a){var n=a.status;if("berhasil"==n){var i=a.dsc,l=100*i,s=t*(1*i),d=t-s,o='<div class="voucheryes">'+lang.voucerok1+l+"%, "+lang.voucerok2+"Rp. "+format_angka(d)+"</div>";$("#vcrhid").val(e),$("#tdpothid").val(s),$("#tdtothid").val(d),$("#use_voucher").hide(),$("#kode_voucher").hide(),$("#newkat_k_notif").hide(),$("#newkat_k_notif").html(o).slideDown(200)}else if("dobelkode"==n){o='<div class="notifno">'+lang.used_vocer+"</div>";$("#newkat_k_notif").hide(),$("#newkat_k_notif").html(o).slideDown(200).delay(3e3).slideUp(200),$("#kode_voucher").val("")}else{o='<div class="notifno">'+lang.failed_vocer+"</div>";$("#newkat_k_notif").hide(),$("#newkat_k_notif").html(o).slideDown(200).delay(3e3).slideUp(200),$("#kode_voucher").val("")}}}})}function btl_apply(){var a=$("#vcrhid").val();""==a?window.location.href="?upgrade=home":$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{kode:a,batalvoucher:global_var},dataType:"json",timeout:300,success:function(a){""!=a&&("berhasil"==a.status&&(window.location.href="?upgrade=home"))}})}function format_angka(a){if(1==is_ID)var e=$.number(a,2,",",".");else e=$.number(a,2);return e}function cancelkonfirm(a){if(1==confirm(lang.ask_batal)){a=$("#idbeli").val();$.ajax({type:"POST",url:"pengaturan/pengaturan-kirim.php",data:{id:a,delbeli:global_var},dataType:"json",timeout:3e4,success:function(a){""!=a&&("berhasil"==a.status?location.reload():alert("gagal"))}})}}function openaddcust(){return $("#cust_id").val("0"),$("#cust_name").val(""),$("#cust_address1").val(""),$("#cust_address2").val(""),$("#cust_address3").val(""),$("#newcust").slideToggle(300),!1}function custsubmitform(a){a.preventDefault(),$("#cust_submit").prop("disabled",!0);var e=$("#cust_name").val(),t=$("#cust_address1").val(),n=t+"||"+$("#cust_address2").val()+"||"+$("#cust_address3").val(),i=$("#cust_id").val();if(""==e||""==t){var l='<div class="notifno">'+lang.fill_all+"</div>";$("#custnotif").hide(),$("#custnotif").html(l).slideDown(100).delay(1e3).slideUp(200,function(){$("#cust_submit").prop("disabled",!1)})}else $("#custloader").fadeIn(200),$.post("peralatan/peralatan-kirim.php",{idcust:i,nama:e,alamat:n,addcustform:global_var},function(a,e){if($("#custloader").fadeOut(200),"success"==e&&a.indexOf("berhasil")>=0)$("#cust_submit").prop("disabled",!1),location.reload();else{var t='<div class="notifno">'+lang.wrong+"</div>";$("#custnotif").hide(),$("#custnotif").html(t).slideDown(100).delay(1e3).slideUp(200,function(){$("#cust_submit").prop("disabled",!1)})}})}function opencustedit(a){var e=$("#custname_"+a).val(),t=$("#custaddress_"+a).val().split("||");$("#cust_id").val(a),$("#cust_name").val(e),$("#cust_address1").val(t[0]),$("#cust_address2").val(t[1]),$("#cust_address3").val(t[2]),$("#newcust").slideDown(300)}function notifopendel_cust(a){if($("#custdelask").is(":hidden")){var e=$("#tdcustname_"+a).text();$("#cust_ya_hapus").click(function(){del_cust(a)}),$("#custnameask").text(e),$("#custdelask").fadeIn(300)}}function notifclosedel_cust(a){$("#custdelask").is(":visible")&&$("#custdelask").fadeOut(300,function(){$("#cust_ya_hapus").unbind(),$("#custnameask").text("")})}function del_cust(a){$("#custdelaskloader").fadeIn(200),$.post("peralatan/peralatan-kirim.php",{id:a,delcust:global_var},function(e,t){$("#custdelaskloader").fadeOut(200),"success"==t&&e.indexOf("berhasil")>=0&&(notifclosedel_cust(a),location.reload(),$("#trcustid_"+a).fadeOut(200))})}function savecheckout(){var a=$("#vcrhid").val(),e=$("#blnhid").val();$("#loader_checkout").fadeIn(),$.post(global_url+"/pengaturan/pengaturan-kirim.php",{name:a,bln:e,simpancek:global_var},function(a,e){if($("#loader_checkout").fadeOut(200),"success"==e&&a.indexOf("berhasil")>=0){$("#catat_notif").hide();var t=a.split("|||")[1],n='<div class="notifyes">'+lang.sukses_submit+"</div>";$("#catat_notif").html(n).slideDown().delay(1e3).slideUp(300,function(){location.replace("?upgrade=konfirmasi&trid="+t)})}else{n='<div class="notifno">'+lang.wrong+"</div>";$("#catat_notif").hide(),$("#catat_notif").html(n).slideDown(200).delay(3e3).slideUp(200)}})}function cekjatuhtempo(){$("#duedatecheck").is(":checked")?$("#colduedate, #colduedate2").slideDown():($("#colduedate, #colduedate2").slideUp(),$(".catatitem").removeClass("activ"))}function changecustomdate(){var a=$("#lap_tgl_from").val(),e=$("#lap_tgl_to").val(),t=$("#monthlinkkas").val(),n=a.replace(/ /g,"+"),i=e.replace(/ /g,"+");window.location.href="?report=custom&datefrom="+n+"&dateto="+i+t}function mailfile(){$("#popdownmail").slideToggle(300)}function attach_mail(){var a=$("#atfromname").val(),e=$("#atfrom").val(),t=$("#attoname").val(),n=$("#atto").val(),i=$("#atmailsubject").val(),l=$("#atmailmessage").val(),s=checkboxval("#choosefile"),d=e.indexOf("@"),o=e.lastIndexOf("."),r=n.indexOf("@"),c=n.lastIndexOf("."),p=$("#keyword").val();if("book"==p){var _=$("#bookid").val(),u=$("#blnkas_show").val();if("xls"==s)var h="ekspor_xls/kas.php/?book="+_+"&month="+u+"&language=en";else h="ekspor_pdf/kas.php/?book="+_+"&month="+u+"&language=en"}else if("asset"==p){var v=$("#tipeset").val(),m=$("#tampil").val(),f=$("#detail").val(),k=$("#id_detail").val();if("show"==m)var b="&hide=show";else b="";if("detail"==f)var g="utang-detil.php",y="&detail="+k;else g="utang.php",y="";if("xls"==s)h="ekspor_xls/"+g+"/?asset="+v+y+b+"&language=en";else h="ekspor_pdf/"+g+"/?asset="+v+y+b+"&language=en"}else if("report"==p){var w=$("#lap_tipe").val(),x=$("#lap_bulan").val(),D=$("#lap_tahun").val(),O=$("#lap_tgl").val(),U=$("#lap_tglto").val(),A=$("#lap_tglfrom").val(),j=$("#lap_tab").val(),I=$("#lap_buku").val();g="report-"+w+".php";if("daily"==w){if(""==O)var T="";else T="&date="+O;var C="",q=""}else if("monthly"==w){if(""==x)C="";else C="&month="+x;T="",q=""}else if("annually"==w){if(""==D)q="";else q="&year="+D;C="",T=""}else{if(""==U||""==A)T="";else T="&datefrom="+A+"&dateto="+U;C="",q=""}if(""==j)var P="";else P="&tab="+j;if(""==I)var S="";else S="&book="+I;if("xls"==s)h="ekspor_xls/"+g+"/?"+S+C+q+P+T+"&language=en";else h="ekspor_pdf/"+g+"/?"+S+C+q+P+T+"&language=en"}if(""==a||""==e||""==t||""==n||""==i||""==l){var z='<div class="notifno">'+lang.fill_mail+"</div>";$("#sendmail_notif").hide(),$("#sendmail_notif").html(z).slideDown(200).delay(3e3).slideUp(200)}else if(0===$('input[name="pilihfile"]:checked').length){z='<div class="notifno">'+lang.select_file+"</div>";$("#sendmail_notif").hide(),$("#sendmail_notif").html(z).slideDown(200).delay(3e3).slideUp(200)}else if(d<1||o<d+2||o+2>=e.length){z='<div class="notifno">'+lang.req_email+"</div>";$("#sendmail_notif").hide(),$("#sendmail_notif").html(z).slideDown(200).delay(3e3).slideUp(200)}else if(r<1||c<r+2||c+2>=n.length){z='<div class="notifno">'+lang.recipient_email+"</div>";$("#sendmail_notif").hide(),$("#sendmail_notif").html(z).slideDown(200).delay(3e3).slideUp(200)}else $("#sendmail_loader").fadeIn(200),$.post(h,{bookid:_,bln_kas:u,tipeset:v,tampil:m,detail:f,id_detail:k,atfromname:a,atfrom:e,attoname:t,atto:n,atsubject:i,atmessage:l,atfile:s,kirimmail:"oke",sendmailfile:global_var},function(a,e){if($("#sendmail_loader").fadeOut(200),"success"==e&&a.indexOf("terkirim")>=0){$("#sendmail_notif").hide();var t='<div class="notifyes">email berhasil dikirim</div>';$("#sendmail_notif").html(t).slideDown(200).delay(1e3).slideUp(300),$("#popdownmail").delay(500).slideUp(500,function(){$("#attoname, #atto, #atmailsubject, #atmailmessage").val(""),$("#atfromname").val(current_user_nama),$("#atfrom").val(current_user_mail)})}else{t='<div class="notifno">'+lang.wrong+"</div>";$("#sendmail_notif").hide(),$("#sendmail_notif").html(t).slideDown(200).delay(3e3).slideUp(200)}})}function showKota(){var a=$("#main_province").val();if(""==a){$("#main_notif").hide(),$("#main_notif").html('<div class="notifno">Provinsi belum dipilih</div>').slideDown(200).delay(3e3).slideUp(200)}else $.post("pengaturan/pengaturan-kirim.php",{provID:a,showlistkota:global_var},function(a,e){if("success"==e&&a.indexOf("berhasil")>=0){$("#main_notif").hide();var t=a.split("|||")[1];$("#main_city").html(t)}else{var n='<div class="notifno">'+lang.wrong+"</div>";$("#main_notif").hide(),$("#main_notif").html(n).slideDown(200).delay(3e3).slideUp(200)}})}function showprovince(){var a=$("#main_timezone").val();"Asia/Jakarta"==a||"Asia/Jayapura"==a||"Asia/Makassar"==a||"Asia/Pontianak"==a?$(".taboptaccount #trprov").show():$(".taboptaccount #trprov").hide()}
/* ================================== Developer 2021 ================================== */
function change_monthyear_link() {
  var month = $("#nav_month").val();
  var year = $("#nav_year").val();
  var year_month = year + "_" + month;
  window.location.href = "?book=" + active_book + "&month=" + year_month;
}
